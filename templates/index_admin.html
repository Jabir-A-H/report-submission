{% extends 'base.html' %} {% import 'macros.html' as macros %} {% block title
%}рж░рж┐ржкрзЛрж░рзНржЯ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛{% endblock %} {% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="page-header">
    <h1 class="page-title">рж░рж┐ржкрзЛрж░рзНржЯ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛</h1>
    <p class="page-subtitle">ржЕрзНржпрж╛ржбржорж┐ржи ржЯрзБрж▓рж╕ ржУ рж╕ржХрж▓ ржЬрзЛржи рж░рж┐ржкрзЛрж░рзНржЯ</p>
  </div>

  <!-- Admin Tools as Cards -->
  <div
    class="modern-grid grid-cols-1 md:grid-cols-3 gap-6 mb-10 max-w-5xl mx-auto"
  >
    <a
      href="{{ city_report_url }}"
      class="modern-card p-6 hover:scale-105 transition-transform duration-300 group"
    >
      <div class="flex items-center gap-3 mb-2">
        <span class="text-3xl animate-float">ЁЯПЩя╕П</span>
        <span class="text-lg font-bold text-gradient">рж╕рж┐ржЯрж┐ рж░рж┐ржкрзЛрж░рзНржЯ</span>
      </div>
      <div class="text-gray-600 text-sm">ржорж╣рж╛ржиржЧрж░рзАрж░ рж░рж┐ржкрзЛрж░рзНржЯ ржжрзЗржЦрзБржи</div>
    </a>
    <a
      href="{{ url_for('admin_users') }}"
      class="modern-card p-6 hover:scale-105 transition-transform duration-300 group"
    >
      <div class="flex items-center gap-3 mb-2">
        <span class="text-3xl animate-float">ЁЯУ▒</span>
        <span class="text-lg font-bold text-gradient">ржЗржЙржЬрж╛рж░ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ</span>
      </div>
      <div class="text-gray-600 text-sm">ржирждрзБржи ржЗржЙржЬрж╛рж░ ржЕржирзБржорзЛржжржи ржУ ржЬрзЛржи ржЕрзНржпрж╛рж╕рж╛ржЗржи</div>
    </a>
    <a
      href="{{ url_for('admin_zones') }}"
      class="modern-card p-6 hover:scale-105 transition-transform duration-300 group"
    >
      <div class="flex items-center gap-3 mb-2">
        <span class="text-3xl animate-float">ЁЯЧ║я╕П</span>
        <span class="text-lg font-bold text-gradient">ржЬрзЛржи ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ</span>
      </div>
      <div class="text-gray-600 text-sm">ржирждрзБржи ржЬрзЛржи рждрзИрж░рж┐ ржУ ржбрж┐рж▓рж┐ржЯ</div>
    </a>
  </div>

  <!-- Reports List (like zone_reports) -->
  <div class="mx-auto max-w-5xl">
    <div
      class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"
    >
      <h2 class="text-3xl font-bold text-gradient">рж╕ржХрж▓ ржЬрзЛржи рж░рж┐ржкрзЛрж░рзНржЯ</h2>
      {% if pagination %}
      <div class="mt-4 sm:mt-0 text-sm text-gray-600">
        <span class="font-medium">{{ pagination.total }}</span> ржЯрж┐ рж░рж┐ржкрзЛрж░рзНржЯ тАв
        ржкрзГрж╖рзНржарж╛ <span class="font-medium">{{ pagination.page }}</span> /
        <span class="font-medium">{{ pagination.pages }}</span>
      </div>
      {% endif %}
    </div>
    {% if reports and reports|length > 0 %}
    <!-- Per-page selector -->
    <div
      class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 p-4 bg-gray-50 rounded-lg"
    >
      <div class="text-sm text-gray-600 mb-2 sm:mb-0">
        ржкрзНрж░рждрж┐ ржкрзГрж╖рзНржарж╛ржпрж╝ ржжрзЗржЦрж╛ржи:
      </div>
      <div class="flex items-center space-x-2">
        {% for size in [10, 25, 50, 100] %}
        <a
          href="{{ url_for('dashboard', page=1, per_page=size, month=month, year=year, report_type=report_type) }}"
          class="px-3 py-1 text-sm rounded-md transition-colors {% if pagination and pagination.per_page == size %}bg-purple-600 text-white{% else %}bg-white text-gray-700 hover:bg-purple-50 border border-gray-300{% endif %}"
        >
          {{ size }}
        </a>
        {% endfor %}
      </div>
    </div>

    <div class="modern-card">
      <!-- Mobile Card View -->
      <div class="block md:hidden space-y-4">
        {% for report in reports %}
        <div
          class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow"
        >
          <div class="flex justify-between items-start mb-3">
            <div>
              <h3 class="text-lg font-semibold text-gray-900">
                Report #{{ report.id }}
              </h3>
              <p class="text-sm text-gray-600">{{ report.report_type }}</p>
            </div>
            <a
              href="{{ url_for('report_summary') }}?report_id={{ report.id }}"
              class="modern-btn btn-primary text-sm px-3 py-2"
            >
              <svg
                class="w-4 h-4 inline mr-1"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              View
            </a>
          </div>
          <div class="grid grid-cols-2 gap-4 text-sm">
            <div>
              <span class="font-medium text-gray-700">Zone:</span>
              <span class="text-gray-900"
                >{{ report.zone.name if report.zone else 'N/A' }}</span
              >
            </div>
            <div>
              <span class="font-medium text-gray-700">Month:</span>
              <span class="text-gray-900"
                >{{ report.month if report.month else '-' }}</span
              >
            </div>
            <div class="col-span-2">
              <span class="font-medium text-gray-700">Year:</span>
              <span class="text-gray-900">{{ report.year }}</span>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Desktop Table View -->
      <div class="hidden md:block table-container">
        <table class="modern-table">
          <thead>
            <tr>
              <th>Report ID</th>
              <th>Zone</th>
              <th>Type</th>
              <th>Month</th>
              <th>Year</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for report in reports %}
            <tr class="table-row-animate">
              <td>{{ report.id }}</td>
              <td>{{ report.zone.name if report.zone else 'N/A' }}</td>
              <td>{{ report.report_type }}</td>
              <td>{{ report.month if report.month else '-' }}</td>
              <td>{{ report.year }}</td>
              <td>
                <a
                  href="{{ url_for('report_summary') }}?report_id={{ report.id }}"
                  class="modern-btn btn-primary"
                >
                  <svg
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  View
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {{ macros.render_pagination(pagination, endpoint='dashboard', month=month,
      year=year, report_type=report_type) }} {% if pagination and
      pagination.pages == 1 %}
      <div class="mt-2 text-center text-sm text-gray-500">
        ЁЯУД Showing all {{ pagination.total }} reports (Page 1 of 1)
      </div>
      {% endif %}
    </div>
    {% else %}
    <div class="modern-alert alert-warning">ржХрзЛржи рж░рж┐ржкрзЛрж░рзНржЯ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐ред</div>
    {% endif %}
  </div>
</div>
{% endblock %}
